#!/bin/sh
#
# unroll2.f test script
#
if Pips -f $PIPS_ROOT/Validation/Transformations/unroll2.f -w unroll2 -m unroll2 -p unroll -b PF >&2 <<EndOfInput
10
2
EndOfInput
then
	echo "--- Code unrolled twice for UNROLL2"
	Display -l code
	if Pips -w unroll2 -m unroll2 -p partial_eval -b PF >&2
	then
		echo "--- Code after partial evaluation for UNROLL2"
		Display -l code
		exit_status=$?
		if Pips -w unroll2 -m unroll2 -p suppress_dead_code -b PF >&2
		then
			echo "--- Code after dead code elimination for UNROLL2"
			Display -l code
			exit_status=$?
		else
			exit_status=3
		fi
	else
		exit_status=2
	fi
else
	exit_status=1
fi
Delete unroll2
exit $exit_status

