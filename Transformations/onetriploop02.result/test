
Initial code

      PROGRAM ONETRIPLOOP02

      READ *, N                                                         0001


      M = N                                                             0002

      M = N+2                                                           0003

      IF (N.GT.0) THEN                                                  0004
         DO I = N, 2*N-1, N                                             0005
            PRINT *, 'i = ', I                                          0006
         ENDDO
      ENDIF

      IF (N.LT.0) THEN                                                  0007
         DO I = N, 2*N+1, N                                             0008
            PRINT *, 'i = ', I                                          0009
         ENDDO
      ENDIF

      END

Initial code with preconditions


C  P() {}

      PROGRAM ONETRIPLOOP02

C  P() {}


      READ *, N                                                         0001

C  P(N) {}



      M = N                                                             0002

C  P(M,N) {M==N}


      M = N+2                                                           0003

C  P(M,N) {M==N+2}


      IF (N.GT.0) THEN                                                  0004

C  P(M,N) {M==N+2, 3<=M}

         DO I = N, 2*N-1, N                                             0005

C  P(I,M,N) {M==N+2, M<=I+2, I+5<=2M, 3<=M}

            PRINT *, 'i = ', I                                          0006
         ENDDO
      ENDIF

C  P(I,M,N) {M==N+2}


      IF (N.LT.0) THEN                                                  0007

C  P(I,M,N) {M==N+2, M<=1}

         DO I = N, 2*N+1, N                                             0008

C  P(I,M,N) {M==N+2, 2M<=I+3, I+2<=M, M<=1}

            PRINT *, 'i = ', I                                          0009
         ENDDO
      ENDIF

      END

Code after one trip loop detection and simplification

      PROGRAM ONETRIPLOOP02

      READ *, N                                                         0001


      M = N                                                             0002

      M = N+2                                                           0003

      IF (N.GT.0) THEN                                                  0004
         I = N
         PRINT *, 'i = ', I                                             0006
      ENDIF

      IF (N.LT.0) THEN                                                  0007
         I = N
         PRINT *, 'i = ', I                                             0009
      ENDIF

      END
