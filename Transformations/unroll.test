#!/bin/sh

# unroll.f test script
#
if Pips -f $PIPS_ROOT/Validation/Transformations/unroll.f -w unroll -m unroll -p unroll -b PF >&2 <<EndOfInput
10
2
EndOfInput
then
	echo "--- Code unrolled twice for UNROLL"
	Display -l code
	if Pips -w unroll -m unroll -p partial_eval -b PF >&2
	then
		echo "--- Code after partial evaluation for UNROLL"
		Display -l code
		exit_status=$?
	else
		exit_status=2
	fi
else
	exit_status=1
fi
Delete unroll
exit $exit_status

