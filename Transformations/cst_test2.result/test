
Preconditions computed for user code


C  P() {}

      SUBROUTINE CST_TEST2

C  P() {}


c     Example taken from ocean (Perfect Club)

      LEIG = 132097                                                     0001

C  P(LEIG) {LEIG==132097}

      IF (.FALSE.) THEN                                                 0002

C  P() {0==-1}

         LEIG = LPRESS-NWEIG                                            0003
      ENDIF

C  P(LEIG) {LEIG==132097}

      LE = 1                                                            0004

C  P(LE,LEIG) {LE==1, LEIG==132097}


      PRINT *, LEIG                                                     0005

C  P(LE,LEIG) {LE==1, LEIG==132097}


c     First synthetic example

      IF (.TRUE.) THEN                                                  0006

C  P(LE,LEIG) {LE==1, LEIG==132097}

         I = 1                                                          0007
      ELSE

C  P() {0==-1}

         I = 2                                                          0008
      ENDIF

C  P(I,LE,LEIG) {I==1, LE==1, LEIG==132097}


      IF (.FALSE.) THEN                                                 0009

C  P() {0==-1}

         I = I+2                                                        0010
      ELSE

C  P(I,LE,LEIG) {I==1, LE==1, LEIG==132097}

         I = I+1                                                        0011
      ENDIF

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


c     Should be I == 2

      PRINT *, I                                                        0012

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


c     Second synthetic example

      IF (.TRUE..AND.I.EQ.1) THEN                                       0013

C  P() {0==-1}

         I = 1                                                          0014
      ELSE

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}

         I = 2                                                          0015
      ENDIF

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


      IF (.FALSE..OR.I.EQ.2) THEN                                       0016

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}

         I = I+2                                                        0017
      ELSE

C  P() {0==-1}

         I = I+1                                                        0018
      ENDIF

C  P(I,LE,LEIG) {I==4, LE==1, LEIG==132097}


c     Should be I == 4

      PRINT *, I                                                        0019

      END

Preconditions computed after dead code elimination


C  P() {}

      SUBROUTINE CST_TEST2

C  P() {}


c     Example taken from ocean (Perfect Club)

      LEIG = 132097                                                     0001

C  P(LEIG) {LEIG==132097}

      LE = 1                                                            0004

C  P(LE,LEIG) {LE==1, LEIG==132097}


      PRINT *, LEIG                                                     0005

C  P(LE,LEIG) {LE==1, LEIG==132097}


c     First synthetic example

      I = 1                                                             0007

C  P(I,LE,LEIG) {I==1, LE==1, LEIG==132097}


      I = I+1                                                           0011

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


c     Should be I == 2

      PRINT *, I                                                        0012

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


c     Second synthetic example

      I = 2                                                             0015

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


      I = I+2                                                           0017

C  P(I,LE,LEIG) {I==4, LE==1, LEIG==132097}


c     Should be I == 4

      PRINT *, I                                                        0019

      END

Preconditions computed after partial evaluation


C  P() {}

      SUBROUTINE CST_TEST2

C  P() {}


c     Example taken from ocean (Perfect Club)

      LEIG = 132097                                                     0001

C  P(LEIG) {LEIG==132097}

      LE = 1                                                            0004

C  P(LE,LEIG) {LE==1, LEIG==132097}


      PRINT *, 132097                                                   0005

C  P(LE,LEIG) {LE==1, LEIG==132097}


c     First synthetic example

      I = 1                                                             0007

C  P(I,LE,LEIG) {I==1, LE==1, LEIG==132097}


      I = I+1                                                           0011

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


c     Should be I == 2

      PRINT *, 2                                                        0012

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


c     Second synthetic example

      I = 2                                                             0015

C  P(I,LE,LEIG) {I==2, LE==1, LEIG==132097}


      I = I+2                                                           0017

C  P(I,LE,LEIG) {I==4, LE==1, LEIG==132097}


c     Should be I == 4

      PRINT *, 4                                                        0019

      END

Code after dead code elimination

      SUBROUTINE CST_TEST2

c     Example taken from ocean (Perfect Club)

      LEIG = 132097                                                     0001
      LE = 1                                                            0004

      PRINT *, 132097                                                   0005

c     First synthetic example

      I = 1                                                             0007

      I = I+1                                                           0011

c     Should be I == 2

      PRINT *, 2                                                        0012

c     Second synthetic example

      I = 2                                                             0015

      I = I+2                                                           0017

c     Should be I == 4

      PRINT *, 4                                                        0019

      END
