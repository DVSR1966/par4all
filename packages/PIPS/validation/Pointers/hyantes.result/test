
POINTS-TO


// Points To IN:
// t.data -> _t_1[0] , MAY


// Points To OUT: none

void display(towns t, data_t xmin, data_t ymin, data_t xmax, data_t ymax, data_t step)
{

// Points To:
// t.data -> _t_1[0] , MAY

   size_t rangex = (xmax-xmin)/step, rangey = (ymax-ymin)/step;

// Points To:
// t.data -> _t_1[0] , EXACT

   size_t i, j;

// Points To:
// t.data -> _t_1[0] , EXACT

   for(i = 0; i < rangex; i += 1) {

// Points To:
// t.data -> _t_1[0] , EXACT

      for(j = 0; j < rangey; j += 1)

// Points To:
// t.data -> _t_1[0] , EXACT

         printf("%lf %lf %lf\n", ((t.data)[i*rangey+j])[0], ((t.data)[i*rangey+j])[1], ((t.data)[i*rangey+j])[2]);

// Points To:
// t.data -> _t_1[0] , EXACT

      printf("\n");
   }
}

// Points To IN:
// argv[*] -> _argv_2[0] , MAY


// Points To OUT: none

int main(int argc, char *argv[])
{

// Points To:
// argv[*] -> _argv_2[0] , MAY

   if (argc!=8)

// Points To:
// argv[*] -> _argv_2[0] , MAY

      return 1;
   {

// Points To:
// argv[*] -> _argv_2[0] , EXACT

      towns t = read_towns(argv[1]);
      
      
      
      
      

// Points To:
// argv[*] -> _argv_2[0] , EXACT
// t.data -> *ANY_MODULE*:*ANYWHERE*_b2 , MAY

      data_t xmin = atof(argv[2])*3.14159265358979323846/180., ymin = atof(argv[3])*3.14159265358979323846/180., xmax = atof(argv[4])*3.14159265358979323846/180., ymax = atof(argv[5])*3.14159265358979323846/180., step = atof(argv[6])*3.14159265358979323846/180., range = atof(argv[7]);

// Points To:
// argv[*] -> _argv_2[0] , EXACT
// t.data -> *ANY_MODULE*:*ANYWHERE*_b2 , MAY

      towns out = run(t, xmin, ymin, xmax, ymax, step, range);

// Points To:
// argv[*] -> _argv_2[0] , EXACT
// out.data -> *ANY_MODULE*:*ANYWHERE*_b2 , MAY
// t.data -> *ANY_MODULE*:*ANYWHERE*_b2 , MAY

      display(out, xmin, ymin, xmax, ymax, step);
   }

// Points To:
// argv[*] -> _argv_2[0] , EXACT
// out.data -> *ANY_MODULE*:*ANYWHERE*_b2 , MAY
// t.data -> *ANY_MODULE*:*ANYWHERE*_b2 , MAY

   return 0;
}

// Points To IN: none


// Points To OUT: none

towns read_towns(const  char fname[])
{

// Points To: none

   FILE *fd = fopen(fname, "r");

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b0 , EXACT

   size_t curr = 0;

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b0 , EXACT

   towns the_towns = {1, malloc(sizeof(town))};

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , EXACT

   fprintf(stderr, "begin parsing ...\n");

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , EXACT


   while (!feof(fd)) {

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

      if (the_towns.nb==curr) {

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

         the_towns.nb *= 2;

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

         the_towns.data = realloc(the_towns.data, the_towns.nb*sizeof(town));
      }

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

      if (fscanf(fd, "%lf%*[ \t]%lf%*[ \t]%lf", &((the_towns.data)[curr])[0], &((the_towns.data)[curr])[1], &((the_towns.data)[curr])[2])!=3) {

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

         char c;
l99999:         ;

// Points To: none

         if (!!feof(fd)) goto _break_2;

// Points To: none

         c = (char) fgetc(fd);

// Points To: none

         if (c=='\n'||c=='\r') {
         }
         else {
            goto l99999;
         }

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

_break_2:         ;
      }
      else {

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

         ((the_towns.data)[curr])[0] *= 3.14159265358979323846/180;

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

         ((the_towns.data)[curr])[1] *= 3.14159265358979323846/180;

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

         ++curr;
      }
   }

// Points To:
// fd -> *ANY_MODULE*:*ANYWHERE*_b1 , MAY
// the_towns.data -> *ANY_MODULE*:*ANYWHERE*_b0 , MAY
// the_towns.data -> *HEAP*_l_33[0] , MAY

   fclose(fd);

// Points To:
// fd -> *ANY_MODULE*:*NOWHERE*_b0 , EXACT
// the_towns.data -> *HEAP*_l_33[0] , MAY

   the_towns.data = realloc(the_towns.data, curr*sizeof(town));

// Points To:
// fd -> *ANY_MODULE*:*NOWHERE*_b0 , EXACT
// the_towns.data -> *HEAP*_l_52[0] , MAY

   the_towns.nb = curr;

// Points To:
// fd -> *ANY_MODULE*:*NOWHERE*_b0 , EXACT
// the_towns.data -> *HEAP*_l_52[0] , MAY

   fprintf(stderr, "parsed %d towns\n", curr);

// Points To:
// fd -> *ANY_MODULE*:*NOWHERE*_b0 , EXACT
// the_towns.data -> *HEAP*_l_52[0] , MAY

   /*
       for(curr=0;curr<the_towns.nb;curr++)
           fprintf(stderr,OUTPUT_FORMAT,the_towns.data[curr][0],the_towns.data[curr][1],the_towns.data[curr][2]);
       */
   return the_towns;
}

// Points To IN:
// t.data -> _t_1[0] , MAY


// Points To OUT: none

towns run(towns t, data_t xmin, data_t ymin, data_t xmax, data_t ymax, data_t step, data_t range)
{

// Points To: none

   size_t i, j;

// Points To: none

   size_t k;

// Points To: none

   size_t rangex = (xmax-xmin)/step, rangey = (ymax-ymin)/step;

// Points To: none

   int nb = 1+rangex*rangey;

// Points To: none

   towns tout = {nb, malloc(sizeof(town)*nb)};

// Points To: none

   fprintf(stderr, "begin computation ...\n");

// Points To: none

   fprintf(stderr, "xrange: ""%lf %lf %lf\n", xmin, xmax, rangex);

// Points To: none

   fprintf(stderr, "yrange: ""%lf %lf %lf\n", ymin, ymax, rangey);

// Points To: none


   for(i = 0; i < rangex; i += 1)

// Points To:
// t.data -> _t_1[0] , EXACT

      for(j = 0; j < rangey; j += 1) {

// Points To:
// t.data -> _t_1[0] , EXACT

         ((tout.data)[i*rangey+j])[0] = (xmin+step*i)*180/3.14159265358979323846;

// Points To:
// t.data -> _t_1[0] , EXACT

         ((tout.data)[i*rangey+j])[1] = (ymin+step*j)*180/3.14159265358979323846;

// Points To:
// t.data -> _t_1[0] , EXACT

         ((tout.data)[i*rangey+j])[2] = 0.;

// Points To:
// t.data -> _t_1[0] , EXACT

         for(k = 0; k < t.nb-1+1; k += 1) {

// Points To:
// t.data -> _t_1[0] , EXACT

            data_t tmp = 6368.*acos(cos(xmin+step*i)*cos(((t.data)[k])[0])*cos(ymin+step*j-((t.data)[k])[1])+sin(xmin+step*i)*sin(((t.data)[k])[0]));

// Points To:
// t.data -> _t_1[0] , EXACT

            if (tmp<range)

// Points To:
// t.data -> _t_1[0] , EXACT

               ((tout.data)[i*rangey+j])[2] += ((t.data)[k])[2]/(1+tmp);
         }
      }

// Points To:
// t.data -> _t_1[0] , EXACT

   fprintf(stderr, "end computation ...\n");

// Points To:
// t.data -> _t_1[0] , EXACT

   return tout;
}
