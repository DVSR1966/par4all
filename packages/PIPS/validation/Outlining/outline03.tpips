delete outline03
create outline03 outline03.c
echo Select some options to deal with the C Language:
echo Parse as C:
activate C_PARSER
echo If possible, transform simple for-loops into do-loop à la Fortran, simpler to analyze:
setproperty FOR_TO_DO_LOOP_IN_CONTROLIZER   TRUE
echo Prettyprint the source as C, of course
setproperty PRETTYPRINT_C_CODE TRUE
display PARSED_PRINTED_FILE[main]
display PRINTED_FILE[main]
apply PRIVATIZE_MODULE[main]
apply COARSE_GRAIN_PARALLELIZATION[%ALLFUNC]
echo All the kernel loops should be //
display PRINTED_FILE[%ALL]
setproperty OUTLINE_LABEL "compute_kernel"
setproperty OUTLINE_MODULE_NAME "compute_kernel"
apply OUTLINE[main]
setproperty OUTLINE_LABEL "init_kernel"
setproperty OUTLINE_MODULE_NAME "init_kernel"
apply OUTLINE[main]
echo The kernels should be parallel. Unfotunately, current OUTLINE version relies on reparsing the code, so parallelism information is lost...
display PRINTED_FILE[%ALL]
apply PRIVATIZE_MODULE[%ALLFUNC]
apply COARSE_GRAIN_PARALLELIZATION[%ALLFUNC]
echo All the kernel loops should be //
display PRINTED_FILE[%ALL]

close
quit
