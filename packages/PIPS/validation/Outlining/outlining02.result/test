
Initial code

int main(int argc, char *argv[])
{
   int j;
   int n;
   char *str = 0;
   if (argc==1) 
      return 1;
l0:   for (j = 0;j<1;j++) {
      n = atoi(argv[1]);
      if (str = malloc(n*sizeof(char))) {
         int i;
         for (i = 0;i<n-1;i++)
            str[i] = 'a'+(char) i;
         str[n-1] = 0;
      }
   }
   if (str) 
      printf("%s\n", str);
   return 0;
}

Code after outlining

int main(int argc, char *argv[])
{
   int j;
   int n;
   char *str = 0;
   if (argc==1) 
      return 1;
l0:   outlined(&j, n, str, argv);
   if (str) 
      printf("%s\n", str);
   return 0;
}
void outlined(int *j, int n, char *str, char *argv[])
{
l0:   for (*j = 0;*j<1;(*j)++) {
      n = atoi(argv[1]);
      if (str = malloc(n*sizeof(char))) {
         int i;
         for (i = 0;i<n-1;i++)
            str[i] = 'a'+(char) i;
         str[n-1] = 0;
      }
   }
}

Unsplit resulting code

ok
