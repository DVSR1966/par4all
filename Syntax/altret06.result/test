
Execute initial code

 foo is entered with  0
 First standard return from foo
 foo is entered with  1
 RETURN 1 in FOO
 STOP 1 in ALTRET07

Code generated by PIPS for FOO

      SUBROUTINE FOO(FORMAL_RETURN_LABEL_1, I)
      INTEGER I
      CHARACTER*(*) FORMAL_RETURN_LABEL_1
      PRINT *, "foo is entered with ", I                                0001
      IF (I.GT.0) GOTO 99998                                            0002
      I = I+1                                                           0005
      CALL SET_I_PIPS_RETURN_CODE_(0)                                   0006
      RETURN
99998 CONTINUE
      PRINT *, 'RETURN 1 in FOO'                                        0003
      CALL SET_I_PIPS_RETURN_CODE_(1)                                   0004
      END

Code generated by PIPS for ALTRET06

      PROGRAM ALTRET06
      INTEGER I

C     Check link-edit issues

      I = 0                                                             0001

      CALL FOO("*123", I)                                               0002
      CALL GET_I_PIPS_RETURN_CODE_(I_PIPS_RETURN_CODE_)                 0003
      IF (I_PIPS_RETURN_CODE_.EQ.1) GOTO 123                            0002
      PRINT *, "First standard return from foo"                         0003

      CALL FOO("*123", I)                                               0004
      CALL GET_I_PIPS_RETURN_CODE_(I_PIPS_RETURN_CODE_)                 0005
      IF (I_PIPS_RETURN_CODE_.EQ.1) GOTO 123                            0004
C     This should not happen!
      PRINT *, "Second standard return from foo"                        0005

      PRINT *, 'STOP 0 in ALTRET07'                                     0006
      STOP 0                                                            0007

123   CONTINUE                                                          0008
      PRINT *, 'STOP 1 in ALTRET07'                                     0009
      STOP 1                                                            0010

      END

Whole code generated by PIPS

!!
!! file for altret06.f
!!
      PROGRAM ALTRET06
      INTEGER I

C     Check link-edit issues

      I = 0                                                             0001

      CALL FOO("*123", I)                                               0002
      CALL GET_I_PIPS_RETURN_CODE_(I_PIPS_RETURN_CODE_)                 0003
      IF (I_PIPS_RETURN_CODE_.EQ.1) GOTO 123                            0002
      PRINT *, "First standard return from foo"                         0003

      CALL FOO("*123", I)                                               0004
      CALL GET_I_PIPS_RETURN_CODE_(I_PIPS_RETURN_CODE_)                 0005
      IF (I_PIPS_RETURN_CODE_.EQ.1) GOTO 123                            0004
C     This should not happen!
      PRINT *, "Second standard return from foo"                        0005

      PRINT *, 'STOP 0 in ALTRET07'                                     0006
      STOP 0                                                            0007

123   CONTINUE                                                          0008
      PRINT *, 'STOP 1 in ALTRET07'                                     0009
      STOP 1                                                            0010

      END
      SUBROUTINE FOO(FORMAL_RETURN_LABEL_1, I)
      INTEGER I
      CHARACTER*(*) FORMAL_RETURN_LABEL_1
      PRINT *, "foo is entered with ", I                                0001
      IF (I.GT.0) GOTO 99998                                            0002
      I = I+1                                                           0005
      CALL SET_I_PIPS_RETURN_CODE_(0)                                   0006
      RETURN
99998 CONTINUE
      PRINT *, 'RETURN 1 in FOO'                                        0003
      CALL SET_I_PIPS_RETURN_CODE_(1)                                   0004
      END
      SUBROUTINE SET_I_PIPS_RETURN_CODE_(IRC)
      INTEGER IRC, IRC_SHARED
      COMMON /PIPS_RETURN_CODE_COMMON/ IRC_SHARED
      IRC_SHARED = IRC                                                  0001
      END
      SUBROUTINE GET_I_PIPS_RETURN_CODE_(IRC)
      INTEGER IRC, IRC_SHARED
      COMMON /PIPS_RETURN_CODE_COMMON/ IRC_SHARED
      IRC = IRC_SHARED                                                  0001
      END

Execute code generated by PIPS

 foo is entered with  0
 First standard return from foo
 foo is entered with  1
 RETURN 1 in FOO
 STOP 1 in ALTRET07
