#!/bin/sh

#
# Old script to test pips on the validation_dead_code program
#
# Use of the rule transformers_inter_fast
#
# if Pips -f $PIPS_DIR/Tests/Validation/Semantics/validation_dead_code.f -w validation_dead_code -m validation_dead_code \
# 	-s pcinter -s tfinter -p prcp >&2
# then
# 	echo "--- Preconditions for module VALIDATION_DEAD_CODE"
# 	Display -l prec
# 	exit_code=0
# else
# 	exit_code=1
# fi
# Delete validation_dead_code >&2
# exit $exit_code
# 

tpips=${tpips_version:-tpips}

$tpips <<EOF

setproperty PRETTYPRINT_BLOCK_IF_ONLY=TRUE

delete validation_dead_code
create validation_dead_code $PIPS_VALIDDIR/Semantics/validation_dead_code.f

set PRETTYPRINT_FINAL_RETURN TRUE
set PRETTYPRINT_ALL_LABELS TRUE
set PRETTYPRINT_EMPTY_BLOCKS TRUE
set PRETTYPRINT_UNSTRUCTURED TRUE

module VALIDATION_DEAD_CODE

activate PRECONDITIONS_INTER_FAST
activate TRANSFORMERS_INTER_FAST
activate PRINT_CODE_PRECONDITIONS

echo --- Preconditions for module VALIDATION_DEAD_CODE

display PRINTED_FILE

close
delete validation_dead_code
quit
EOF
