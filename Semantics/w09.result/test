
TRANSFORMERS


C  T() {}

      PROGRAM W09

C     Test de l'arret de la voiture propose par Nicolas Halbwachs, 15
C     mars 2005

      INTEGER MS, S, M

C  T(M,MS,S) {0<=M, M<=11}

C (0,1)
C     BEGIN BLOCK

C  T(MS) {MS==0}

C (0,2)

      MS = 0                                                            0001

C  T(S) {MS==0, S==0}

C (0,3)
      S = 0                                                             0002

C  T(M) {M==0, MS==0, S==0}

C (0,4)
      M = 0                                                             0003

C  T(M,MS,S) {M#init<=M, M+MS#init+2S#init<=M#init+MS+2S,
C    MS#init+3S#init<=MS+3S, S#init<=S}

C (0,5)

      DO WHILE (MS.LE.2.AND.S.LE.4)                                     0004

C  T(M,MS,S) {M+S==M#init+S#init+1, MS#init+3S#init+1<=MS+3S,
C    MS+3S<=3S#init+3, S#init<=S, S<=S#init+1, S#init<=4}

C (0,6)
         IF (X.GT.0.) THEN                                              0005

C  T(MS,S) {MS==0, S==S#init+1, MS#init<=2, S<=5}

C (0,7)
C           BEGIN BLOCK

C  T(S) {S==S#init+1, MS<=2, S<=5}

C (0,8)
            S = S+1                                                     0006

C  T(MS) {MS==0, MS#init<=2, S<=5}

C (0,9)
            MS = 0                                                      0007
C           END BLOCK
         ELSE

C  T(M,MS) {M==M#init+1, MS==MS#init+1, MS<=3, S<=4}

C (0,10)
C           BEGIN BLOCK

C  T(M) {M==M#init+1, MS<=2, S<=4}

C (0,11)
            M = M+1                                                     0008

C  T(MS) {MS==MS#init+1, MS<=3, S<=4}

C (0,12)
            MS = MS+1                                                   0009
C           END BLOCK
         ENDIF
      ENDDO

C  T() {0<=M, MS<=3M, M<=MS+2S, 0<=M+S, MS<=3, MS+3S<=15, 0<=S, S<=5}

C (0,13)

      PRINT *, MS, S, M                                                 0010

C  T(MS,S) {0<=M, MS#init<=3M, M<=MS#init+2S#init, 0<=M+S#init,
C    MS#init<=3, MS#init+3S#init<=15, 0<=S#init, S#init<=5}

C (0,14)
      READ *, S, MS                                                     0011

C  T() {0<=M, M<=11}

C (0,15)

      IF (M.LE.11) THEN                                                 0012

C  T() {0<=M, M<=11}

C (0,16)
         PRINT *, "healthy"                                             0013
      ELSE

C  T() {0==-1}

C (0,17)
         PRINT *, "crashed!"                                            0014
      ENDIF

C     END BLOCK
      END

PRECONDITIONS


C  P() {}

      PROGRAM W09

C     Test de l'arret de la voiture propose par Nicolas Halbwachs, 15
C     mars 2005

      INTEGER MS, S, M

C  P() {}

C (0,1)
C     BEGIN BLOCK

C  P() {}

C (0,2)

      MS = 0                                                            0001

C  P(MS) {MS==0}

C (0,3)
      S = 0                                                             0002

C  P(MS,S) {MS==0, S==0}

C (0,4)
      M = 0                                                             0003

C  P(M,MS,S) {M==0, MS==0, S==0}

C (0,5)

      DO WHILE (MS.LE.2.AND.S.LE.4)                                     0004

C  P(M,MS,S) {0<=M, MS<=3M, MS<=2M+2S, M<=MS+2S, MS<=2, 0<=S, S<=4}

C (0,6)
         IF (X.GT.0.) THEN                                              0005

C  P(M,MS,S) {0<=M, MS<=3M, MS<=2M+2S, M<=MS+2S, MS<=2, 0<=S, S<=4}

C (0,7)
C           BEGIN BLOCK

C  P(M,MS,S) {0<=M, MS<=3M, MS<=2M+2S, M<=MS+2S, MS<=2, 0<=S, S<=4}

C (0,8)
            S = S+1                                                     0006

C  P(M,MS,S) {0<=M, MS<=3M, MS+2<=2M+2S, M+2<=MS+2S, MS<=2, 1<=S,
C    S<=5}

C (0,9)
            MS = 0                                                      0007
C           END BLOCK
         ELSE

C  P(M,MS,S) {0<=M, MS<=3M, MS<=2M+2S, M<=MS+2S, MS<=2, 0<=S, S<=4}

C (0,10)
C           BEGIN BLOCK

C  P(M,MS,S) {0<=M, MS<=3M, MS<=2M+2S, M<=MS+2S, MS<=2, 0<=S, S<=4}

C (0,11)
            M = M+1                                                     0008

C  P(M,MS,S) {1<=M, MS+3<=3M, MS+2<=2M+2S, M<=MS+2S+1, MS<=2, 0<=S,
C    S<=4}

C (0,12)
            MS = MS+1                                                   0009
C           END BLOCK
         ENDIF
      ENDDO

C  P(M,MS,S) {MS<=3M, M<=MS+2S, 5<=5M+S, MS<=3, 15<=5MS+13S,
C    MS+3S<=15, S<=5}

C (0,13)

      PRINT *, MS, S, M                                                 0010

C  P(M,MS,S) {0<=M, MS<=3M, M<=MS+2S, 5<=5M+S, 0<=M+S, MS<=3,
C    15<=5MS+13S, MS+3S<=15, 0<=S, S<=5}

C (0,14)
      READ *, S, MS                                                     0011

C  P(M,MS,S) {0<=M, M<=11}

C (0,15)

      IF (M.LE.11) THEN                                                 0012

C  P(M,MS,S) {0<=M, M<=11}

C (0,16)
         PRINT *, "healthy"                                             0013
      ELSE

C  P() {0==-1}

C (0,17)
         PRINT *, "crashed!"                                            0014
      ENDIF

C     END BLOCK
      END

AFTER DEAD CODE ELIMINATION

      PROGRAM W09

C     Test de l'arret de la voiture propose par Nicolas Halbwachs, 15
C     mars 2005

      INTEGER MS, S, M
C (0,1)
C     BEGIN BLOCK
C (0,2)

      MS = 0                                                            0001
C (0,3)
      S = 0                                                             0002
C (0,4)
      M = 0                                                             0003
C (0,5)

      DO WHILE (MS.LE.2.AND.S.LE.4)                                     0004
C (0,6)
         IF (X.GT.0.) THEN                                              0005
C (0,7)
C           BEGIN BLOCK
C (0,8)
            S = S+1                                                     0006
C (0,9)
            MS = 0                                                      0007
C           END BLOCK
         ELSE
C (0,10)
C           BEGIN BLOCK
C (0,11)
            M = M+1                                                     0008
C (0,12)
            MS = MS+1                                                   0009
C           END BLOCK
         ENDIF
      ENDDO
C (0,13)

      PRINT *, MS, S, M                                                 0010
C (0,14)
      READ *, S, MS                                                     0011
C (0,15)

      PRINT *, "healthy"                                                0013

C     END BLOCK
      END
