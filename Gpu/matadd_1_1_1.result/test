      PROGRAM MATADD
      INTEGER M
      INTEGER N
      PARAMETER (M = 402, N = 160)
      INTEGER I, J
      REAL A(M, N), B(M, N), C(M, N)

      CALL P4A_KERNEL_LAUNCHER_0(B, C)                                  0008

      CALL P4A_KERNEL_LAUNCHER_1(A, B, C)                               0015

      END
      SUBROUTINE P4A_KERNEL_0(I, J, B, C)
      INTEGER I, J
      REAL*4 B(1:M, 1:N), C(1:M, 1:N)
      B(I,J) = I                                                        0004
      C(I,J) = J                                                        0005
      END
      SUBROUTINE P4A_KERNEL_1(I, A, B, C, J)
      INTEGER I, J
      REAL*4 A(1:M, 1:N), B(1:M, 1:N), C(1:M, 1:N)
      A(I,J) = B(I,J)+C(I,J)                                            0004
      END
      SUBROUTINE P4A_KERNEL_LAUNCHER_0(B, C)
      INTEGER J, I
      REAL*4 B(1:M, 1:N), C(1:M, 1:N)
C PIPS generated variable

      DO I = 1, M                                                       0006
         DO J = 1, N                                                    0007
            CALL P4A_KERNEL_WRAPPER_0(I, J, B, C)                       0008
         ENDDO
      ENDDO
      END
      SUBROUTINE P4A_KERNEL_LAUNCHER_1(A, B, C)
      INTEGER J, I
      REAL*4 A(1:M, 1:N), B(1:M, 1:N), C(1:M, 1:N)
C PIPS generated variable

      DO I = 1, M                                                       0006
         DO J = 1, N                                                    0007
            CALL P4A_KERNEL_WRAPPER_1(A, B, I, J, C)                    0008
         ENDDO
      ENDDO
      END
      SUBROUTINE P4A_KERNEL_WRAPPER_0(I, J, B, C)
      INTEGER I, J
      REAL*4 B(1:M, 1:N), C(1:M, 1:N)
C To be replaced with a call to P4A_vp_0      I = I
C To be replaced with a call to P4A_vp_1      J = J
      CALL P4A_KERNEL_0(I, J, B, C)                                     0006
      END
      SUBROUTINE P4A_KERNEL_WRAPPER_1(A, B, I, J, C)
      INTEGER I, J
      REAL*4 A(1:M, 1:N), B(1:M, 1:N), C(1:M, 1:N)
C To be replaced with a call to P4A_vp_0      I = I
C To be replaced with a call to P4A_vp_1      J = J
      CALL P4A_KERNEL_1(I, A, B, C, J)                                  0006
      END
