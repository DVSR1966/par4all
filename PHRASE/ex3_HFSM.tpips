create ex3_HFSM ex3.c
activate C_PARSER
setproperty PRETTYPRINT_C_CODE TRUE
setproperty PRETTYPRINT_STATEMENT_NUMBER FALSE

echo Transform all the control flow in hierarchical finite state machines:
apply SPAGHETTIFY[%ALL]
apply FSM_GENERATION[%ALL]
display PRINTED_FILE[%ALL]

echo For fun, prettyprint the C code as SmallTalk for the Madeo synthesis tool:
display SMALLTALK_CODE_FILE[ex3]

close
delete ex3_HFSM
