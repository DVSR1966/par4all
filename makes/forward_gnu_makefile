# $RCSfile: forward_gnu_makefile,v $ (version $Revision$)
# $Date: 1996/07/10 20:12:31 $, 
# (c) Fabien COELHO 1996
#
# this makefile forwards make targets to subdirectories...
# it must ge used with GNU make
#
# these variables may be overwritten on the command line
# gmake DIRS="foo blah" MAKE_MESSAGE="argh!" MAKE_REPORT=/dev/null
#

# the list of sub directories for forwarding commands:
DIRS=$(wildcard *)

# the message if reporting a failure:
MAKE_MESSAGE=

# where (file) to report a failure:
MAKE_REPORT=/dev/tty

# forward any command to the specified directories
%::
	-for d in $(DIRS) ; do \
	  if test -d $$d ; then \
	    $(MAKE) -C $$d $@ || \
	    echo "$@ failed [$(MAKE_MESSAGE)] in $$d" >> $(MAKE_REPORT) ;\
	fi ; done

# end of $RCSfile: forward_gnu_makefile,v $
#
