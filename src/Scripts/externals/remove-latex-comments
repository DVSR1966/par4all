#!/bin/sh
#
# $RCSfile: remove-latex-comments,v $ (version $Revision$)
# $Date: 1996/06/28 17:02:58 $, 
#
# Conversion d'un fichier Latex en un fichier NewGen
#
# Remi Triolet
#
# Modifications
#  - ajout de l'option bidon "-" aux commandes "echo" (FI, 29/12/89)
#  - suppression de la mise en minuscule pour les "external domains"
#    (FI, 29/12/89)
#  - remplacement de la mise en minuscule systematique des domaines
#    definies par la mise en minuscule du PREMIER caractere de chaque
#    declaration NewGen pour conserver la belle presentation du
#    chef de projet-president :-) (FI, 29/12/89)
# - shorten and changed, FC 

input=$1
tmp=`basename $1 .tex`
output=`basename $tmp .f`.newgen

tmp=/tmp/rlc.$$
rm -rf $tmp.*

cat > $output <<!
--	   --------------------------------------------------------
--	   --------------------------------------------------------
--
--				    WARNING
--
--		  THIS FILE HAS BEEN AUTOMATICALLY GENERATED
--
--			       DO NOT MODIFY IT
--
--	   --------------------------------------------------------
--	   --------------------------------------------------------
!

# keep domain definitions
#
sed    '/^\\domain{/s,^\\domain{ *\(.*\)} *$,\1 ;,p
        1,/^\\begin{domain}/d
        /^\\end{domain}/,/^\\begin{domain}/d
	/^\\end{domain}/,$d' $input | 
# 
# put in lower cases
#
tr '[A-Z]' '[a-z]' | 
#
# sort the result
#
sort |
#
# remove unwanted characters
# and separate in different files
#
sed "	s,\\\\,,g;
	/^import /w $tmp.import
	/^import /d
	/^external /w $tmp.external
	/^external /d
	w $tmp.domains
	d"

{
  echo
  echo "-- Imported domains" 
  echo "-- ----------------" 
  cat $tmp.import
  echo 
  echo "-- External domains" 
  echo "-- ----------------" 
  cat $tmp.external
  echo 
  echo "-- Domains" 
  echo "-- -------" 
  cat $tmp.domains
} >> $output

rm -rf $tmp.*

# end of $RCSfile: remove-latex-comments,v $
#
