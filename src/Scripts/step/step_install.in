#!/bin/bash
# Copyright 2007, 2008, 2009 Alain Muller, Frederique Silber-Chaussumier
#
#This file is part of STEP.
#
#The program is distributed under the terms of the GNU General Public
#License.

# Ce script installe dans le répertoire $DEST_DIR les fichiers générés dans le répertoire $SRC_DIR et les fichiers de la runtime de STEP
# - le premier argument indique le répertoir d'instalation $DEST_DIR
# - les arguments suivant indique le répertoire contenant les fichiers générés

RUNTIME=$1
DEST_DIR=$2
SRC_DIR=$3

STEP_RT=step_rt
DEFAULT_STEP_HEADER=STEP.h
STEP_HEADER=STEP.h


#filtrage des includes $DEFAULT_STEP_HEADER et deplacement des fichiers générés
step_filtre_include $DEST_DIR $DEFAULT_STEP_HEADER $STEP_HEADER $SRC_DIR/*

#installation des fichiers de la runtime
mkdir -p $DEST_DIR/$STEP_RT

prefix=@prefix@
cp @datadir@/step/$RUNTIME/* $DEST_DIR/$STEP_RT
cp -r @datadir@/step/util $DEST_DIR/$STEP_RT

#installation des fichiers .h
cp @datadir@/step/STEP.h $DEST_DIR
cp @datadir@/step/steprt_f.h $DEST_DIR

#installation du Makefile par defaut
cp @datadir@/step/Makefile $DEST_DIR
