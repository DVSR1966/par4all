#! /bin/sh
#
# $Id$
#

CD=$PWD

for dir
do
  if test -d $dir
  then 
    cd $dir
    for f in *.result/*.out
    do 
        if [ "$f" != "*.result/*.out" ] 
        then
	    ref="`dirname $f`/`${PIPS_BASENAME:-basename} $f .out`"
	    echo CONSIDERING $ref and $f
	    ${PIPS_DIFF:-diff} $ref $f | ${PIPS_MORE:-less}
	    echo 
	    echo "accept (y|n)?"
	    read answer
	    [ "$answer" = 'y' -o "$answer" = 'Y' ] && mv $f $ref
	fi
    done
    cd $CD
  fi
done

echo "consider running \"svn ci $@\" to commit changes"
