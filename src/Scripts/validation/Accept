#!/bin/sh
# 
# Accept differences after validation.
#
# Use the validation error message as standard input to accept to update
# the validations suite. Create a new ~.result .
#
# Mail problem to jouvelot@ensmp.fr
#
# modified by Fabien COELHO
# - sed and read are used to select the fields
# - mv instead if ed used to update the results
# - several files may be piped simultaneously
#
# SCCS Stuff:
# $RCSfile: Accept,v $ ($Date: 1997/02/19 09:01:31 $, ) version $Revision$,
# got on %D%, %T%
# $Id$
#

header="Differences for"
pips_test_directory="${$PIPS_ROOT/Validation}"

sed -n "/^$header/s,^$header \([^ ]*\) in \([^ ]*\):,\1 \2,p" |
while read module file
do
  outfile=$file.out
  reffile=$file

  if [ -f $outfile ] 
  then
    echo "accepting for $file"

    rm -f $reffile
    mv $outfile $reffile
  else
    echo "*** $outfile not found" 2>&1 
  fi
done

#
# that is all
#
