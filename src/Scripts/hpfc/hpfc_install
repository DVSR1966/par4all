#! /bin/sh
#
# Installation in directory...
#
# $RCSfile: hpfc_install,v $ ($Date: 1994/04/13 15:37:56 $, )
# version $Revision$
# got on %D%, %T%
# $Id$
#

# defaults

WD=`pwd`

unset DIRECTORY SRCDIR BASEDIR REFFILE

VERBOSE=':'
DEBUG=':'
SRCDIR=$EXTEDIR

if [ -f .pipsprogram ] 
then
  BASEDIR="$WD/`sed -n 's,^PGM=\(.*\)\$,\1,p' .pipsprogram`.database"
fi

# get options

usage()
{
  echo "Usage: $0 [-vd] [-r file] [-t dir] [-s dir] [-b dir]" 2>&1
  exit ${1:-1}
}

while getopts vdt:s:b:r: OPT
do
  case $OPT in
    v) VERBOSE='echo' ;;
    d) DEBUG='echo' ;;
    t) DIRECTORY="$OPTARG" ;;
    s) SRCDIR="$OPTARG" ;;
    b) BASEDIR="$OPTARG" ;;
    r) REFFILE="$OPTARG" ;;
    *) usage
  esac
done

shift `expr $OPTIND - 1`

[ $# -eq 0 ] || usage
[ "$BASEDIR" ] || usage

[ "$DIRECTORY" ] ||
{
  DIRECTORY=$WD/tmp
  mkdir $DIRECTORY
}

#

$VERBOSE "cleaning $DIRECTORY"
rm -f $DIRECTORY/*

$VERBOSE "copying files in $DIRECTORY"
cp $SRCDIR/hpfc_*.h $SRCDIR/hpfc_*.f $DIRECTORY
cp $SRCDIR/hpfc_Makefile $DIRECTORY/Makefile
cp $PVM_ROOT/include/*.h $DIRECTORY
cp $BASEDIR/host.f $BASEDIR/node.f $BASEDIR/init_param.f \
	$BASEDIR/parameters.h $DIRECTORY
[ "$REFFILE" ] && cp $REFFILE $DIRECTORY

#
# that is all
#
