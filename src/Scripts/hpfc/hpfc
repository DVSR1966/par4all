#! /bin/sh
# 
# $RCSfile: hpfc,v $ (version $Revision$)
# $Date: 1995/04/23 11:28:58 $, 
#
# hpfc scripts very front-end
# just an easy way not to have to remember the name of some scripts.
#

script=`basename $0`

usage()
{
  cat >&2 <<-END
	usage: $script [-vdq] function [options] [arguments]
	  version is $Revision$, function among (3 significant characters):
	  h|help: give some help
	  c|compile: compile
	  f|full: compile, compile and link
	  D|debug: compile with debug option
	  C|clean: clean directories
	  d|delete: delete hpfc directory
	  F|filter: show filter result
	  m|make: compile and link
	  r|run: run...
	  v|validate: used by the validation...
	  p|pvm: pvm control
	END
  exit ${1:-1}
}

DEMO=demo

while getopts vdq OPT
do
  case $OPT in
    v) DEMO=void ;;
    q) DEMO=demo ;;
    d) DEBUG=debug ;;
    *) usage 4
  esac
done

shift `expr $OPTIND - 1`

key=$1
shift

case $key in
  h|hel*) usage 0 ;;
  c|com*) hpfc_compile -k $DEMO "$@" ;;
  f|ful*) hpfc_compile -k $DEMO -k full "$@" ;;
  D|deb*) hpfc_compile -k debug "$@" ;;
  v|val*) hpfc_compile -k validate "$@" ;;
  C|cle*) Delete "$@" ; hpfc_del "$@" ;;
  d|del*) hpfc_del "$@" ;;
  F|fil*) hpfc_directives < "$@" ;;
  m|mak*) cd `basename $1 .hpfc`.hpfc ; make all ;;
  r|run*) echo 'not implemented' ;;
  p|pvm*) echo "$@" | pvm ; echo ;;
  *) usage 2
esac

# that is all
#
